networks: 
  default:
    driver: bridge
    # enable_ipv6: true
services:
  gluetun-proxy:
    image: qmcgaw/gluetun:v3.40
    container_name: gluetun-proxy
    restart: always
    cap_add:
      - NET_ADMIN
    # sysctls:
    #   - net.ipv6.conf.all.disable_ipv6=0
    environment:
      TZ: $TZ
      VPN_SERVICE_PROVIDER: $provider
      VPN_TYPE: wireguard
      WIREGUARD_PRIVATE_KEY: ${wgkey}
      DOT_PROVIDERS: quad9
      # DOT_IPV6: on
      SERVER_CITIES: $cities
    ports:
      - 1080:1080/tcp # socks5 proxy
      - 8888:8888/tcp # http proxy
    volumes:
      - $data/gluetun-proxy:/gluetun:rw
  socks5proxy:
    image: serjs/go-socks5-proxy
    container_name: socks5proxy
    network_mode: service:gluetun-proxy
    restart: always
  tor-privoxy:
    image: dockage/tor-privoxy
    container_name: tor-privoxy
    restart: always
    ports:
      - 9050:9050
